<!DOCTYPE html>
<html>
<head>
  <title>Stock Market Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial; padding: 1rem; background: #f0f0f0; }
    #charts { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    canvas { background: #fff; border-radius: 8px; padding: 1rem; }
  </style>
</head>
<body>
  <h1>Last 1 Month Stock Overview</h1>
  <div id="charts"></div>

  <script>
    const symbols = {{ symbols|tojson }};
    
    async function loadChart(name) {
      const res = await fetch(`/data/${name}`);
      const d = await res.json();
      if (!d.dates.length) return;

      const canvas = document.createElement("canvas");
      document.getElementById("charts").appendChild(canvas);

      new Chart(canvas.getContext("2d"), {
        type: "line",
        data: {
          labels: d.dates,
          datasets: [{
            label: name,
            data: d.close,
            borderWidth: 2,
            fill: false,
            borderColor: '#'+Math.floor(Math.random()*16777215).toString(16)
          }]
        },
        options: { responsive: true, scales: { x: { display: true }, y: { display: true } } }
      });
    }

    symbols.forEach(loadChart);
  </script>
</body>
</html>
